<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ClearToast Pro - Die Revolution des Toastens</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
    
    <style>
        :root {
            --primary-color: #00d1c1;
            --background-color: #000000;
            --surface-color: #1c1c1e;
            --text-color: #f5f5f7;
            --text-color-secondary: #a1a1a6;
            --border-color: #424245;
            --font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body { background: var(--background-color); color: var(--text-color); font-family: var(--font-family); overflow-x: hidden; }
        /* Stil für den Container über seine ID */
        /* 1. Der unsichtbare Wrapper, der nur zentriert */
        .modern-image-wrapper {
        display: flex;
        justify-content: center; /* Zentriert das Bild horizontal */
        padding: 20px; /* Optional: Gibt dem Schatten Platz zum "Atmen" */
        }

        /* 2. Der moderne Stil für das Bild selbst */
        .rounded-shadow-image {
        /* Größe anpassen */
        width: 60%;
        max-width: 1550px; /* Maximale Größe für große Bildschirme */
        height: auto; /* Seitenverhältnis beibehalten */

        /* Der "moderne Rand" */
        border-radius: 25px; /* Starke Abrundung für einen weichen Look */
        
        /* Der Schatten ersetzt den klassischen Rand und sorgt für Tiefe */
        box-shadow: 0 12px 28px rgba(0, 0, 0, 0.12); 
        }
        .container { max-width: 980px; margin: 0 auto; padding: 0 2rem; }
        .header { position: fixed; top: 0; width: 100%; background: rgba(28, 28, 30, 0.8); backdrop-filter: blur(20px); z-index: 1000; }
        .nav { display: flex; justify-content: space-between; align-items: center; height: 48px; }
        .nav-links { display: flex; gap: 1.5rem; list-style: none; align-items: center; }
        .nav-link { color: var(--text-color-secondary); text-decoration: none; font-size: 14px; transition: color 0.3s ease; }
        .nav-link:hover, .nav-link.logo { color: var(--text-color); }
        .logo { font-weight: 600; font-size: 18px; }
        
        .btn { padding: 12px 24px; background: var(--primary-color); color: #000; border: none; border-radius: 50px; cursor: pointer; font-weight: 600; font-size: 1rem; transition: transform 0.3s ease, filter 0.3s ease; text-decoration: none; }
        .btn:hover { filter: brightness(1.1); transform: scale(1.05); }
        .btn.secondary { background: var(--surface-color); color: var(--text-color); border: 1px solid var(--border-color); }
        .btn.secondary:hover { background: var(--border-color); }
        .btn:disabled { background: #555; color: #999; cursor: not-allowed; transform: none; filter: none; }

        /* --- 3D Canvas & Scroll Story --- */
        .canvas-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; }
        #main-3d-canvas { position: absolute; top: 0; left: 0; z-index: 0; }
        #mask-3d-canvas { position: absolute; top: 0; left: 0; z-index: 1; }
        .scroll-section-container { position: relative; width: 100%; height: 300vh; z-index: 2; }
        .story-content { height: 100vh; display: flex; justify-content: center; align-items: center; text-align: center; position: sticky; top: 0; opacity: 0; transform: translateY(20px); transition: opacity 0.5s ease, transform 0.5s ease; color: #00d1c1; mix-blend-mode: difference; }
        .story-content.visible { opacity: 1; transform: translateY(0); }
        .story-text h1 { font-size: 5rem; font-weight: 700; max-width: 800px; line-height: 1.1; letter-spacing: -0.02em; }
        .story-text h2 { font-size: 3rem; font-weight: 600; margin-top: 1rem; letter-spacing: -0.01em; }
        
        /* --- Post-Scroll Content Sections --- */
        .content-area { background-color: var(--background-color); position: relative; z-index: 5; }
        .section { padding: 120px 0; }
        .section-title { font-size: 4rem; text-align: center; font-weight: 700; margin-bottom: 4rem; letter-spacing: -0.02em; }
        .section-subtitle { font-size: 1.5rem; text-align: center; color: var(--text-color-secondary); max-width: 600px; margin: -2rem auto 4rem; line-height: 1.5; }

        /* --- Features Grid --- */
        .features-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; }
        .feature-item { text-align: center; background: var(--surface-color); padding: 2rem; border-radius: 20px; border: 1px solid var(--border-color); transition: transform 0.4s ease, box-shadow 0.4s ease; }
        .feature-item:hover { transform: translateY(-10px); box-shadow: 0 20px 40px rgba(0,0,0,0.3); }
        .feature-item i { font-size: 2.5rem; color: var(--primary-color); margin-bottom: 1.5rem; }
        .feature-item h3 { font-size: 1.5rem; margin-bottom: 1rem; }
        .feature-item .feature-details { max-height: 0; overflow: hidden; transition: max-height 0.5s ease-out; }
        .feature-item:hover .feature-details { max-height: 200px; }
        .feature-item .feature-short-desc { color: var(--text-color-secondary); line-height: 1.6; }
        .feature-item .feature-details p { color: var(--text-color); line-height: 1.6; margin-top: 1rem; }
        
        /* --- Integrated UI Demo Section --- */
        .ui-demo-outer-container { background: var(--surface-color); border-radius: 30px; padding: 2rem; border: 1px solid var(--border-color); }
        .toaster-app { width: 100%; max-width: 800px; margin: auto; height: 400px; background: #111; border-radius: 20px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); position: relative; overflow: hidden; }
        .selection-view, .timer-view { width: 100%; height: 100%; position: absolute; transition: transform 0.6s cubic-bezier(0.86, 0, 0.07, 1); }
        .slider-container { width: 100%; height: 100%; position: relative; overflow: hidden; display: flex; align-items: center; justify-content: center;}
        .slider { display: flex; height: 100%; transition: transform 0.5s ease; align-items: center; }
        .slide { min-width: 100%; display: flex; justify-content: center; align-items: center; height: 100%; flex-direction: column; gap: 1rem; padding: 0 1rem; }
        .toast-img { height: 180px; object-fit: contain; filter: drop-shadow(0 10px 20px rgba(0,0,0,0.2)); margin: auto; }
        .slide-title { font-size: 1.2rem; font-weight: 500; text-align: center; }
        .nav-btn { position: absolute; top: 50%; transform: translateY(-50%); width: 50px; height: 50px; background: rgba(40, 40, 40, 0.8); border-radius: 50%; display: flex; justify-content: center; align-items: center; cursor: pointer; border: 1px solid #444; z-index: 10; transition: background-color 0.2s; }
        .nav-btn:hover { background: rgba(60, 60, 60, 0.9); }
        .prev-btn { left: 20px; }
        .next-btn { right: 20px; }
        .arrow { width: 12px; height: 12px; border-top: 3px solid #fff; border-right: 3px solid #fff; }
        .prev-btn .arrow { transform: rotate(-135deg); }
        .next-btn .arrow { transform: rotate(45deg); }
        .browning-indicator { position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); display: flex; gap: 10px; }
        .dot { width: 10px; height: 10px; border-radius: 50%; background: #444; transition: all 0.3s; }
        .dot.active { background: var(--primary-color); }
        .start-btn { position: absolute; bottom: 30px; right: 30px; width: 70px; height: 70px; background: var(--primary-color); border-radius: 50%; border: none; cursor: pointer; display: flex; justify-content: center; align-items: center; box-shadow: 0 10px 20px rgba(0, 209, 193, 0.2); transition: transform 0.3s ease; z-index: 10; }
        .start-btn:hover { transform: scale(1.1); }
        .start-btn i { color: #000; font-size: 1.5rem; margin-left: 3px; }
        .timer-view { transform: translateX(100%); display:flex; flex-direction:column; justify-content:center; align-items:center; }
        
        /* --- GEÄNDERT: Progress Bar statt Circle --- */
        .progress-bar-container {
            width: 80%;
            max-width: 300px;
            height: 12px;
            background-color: #333;
            border-radius: 6px;
            overflow: hidden;
            margin-bottom: 2rem;
        }
        .progress-bar-fill {
            width: 0%; /* Startet bei 0 */
            height: 100%;
            background-color: var(--primary-color);
            border-radius: 6px;
            transition: width 1s linear; /* Animiert die Breitenänderung */
        }
        .timer-display { font-size: 3rem; font-weight: 500; color: var(--text-color); }
        .cancel-btn { background: none; border: 2px solid var(--text-color-secondary); color: var(--text-color-secondary); font-size: 1rem; font-weight: 600; cursor: pointer; padding: 10px 20px; border-radius: 30px; margin-top: 2rem; transition: all 0.3s; }
        .cancel-btn:hover { background: var(--text-color-secondary); color: #000; }
        
        .toaster-app.timer-active .selection-view { transform: translateX(-100%); }
        .toaster-app.timer-active .timer-view { transform: translateX(0); }

        /* --- Gallery Section --- */
        .gallery-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem; }
        .gallery-item { border-radius: 20px; overflow: hidden; aspect-ratio: 1 / 1; }
        .gallery-item img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.4s ease; }
        .gallery-item:hover img { transform: scale(1.1); }

        /* --- Reviews Section --- */
        .reviews-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; align-items: stretch; }
        .review-card { background: var(--surface-color); border: 1px solid var(--border-color); border-radius: 20px; padding: 2rem; display: flex; flex-direction: column; }
        .review-stars { color: #f39c12; margin-bottom: 1.5rem; }
        .review-stars i { font-size: 1.2rem; }
        .review-text { font-size: 1.1rem; line-height: 1.6; color: var(--text-color); font-style: italic; flex-grow: 1; }
        .review-author { margin-top: 1.5rem; font-weight: 600; color: var(--primary-color); }
        .review-author span { display: block; font-weight: 400; color: var(--text-color-secondary); font-size: 0.9rem; margin-top: 0.25rem; }

        /* --- Final CTA & Footer --- */
        .final-cta { text-align: center; background: var(--surface-color); padding: 80px 2rem; border-radius: 30px; border: 1px solid var(--border-color); }
        .footer { padding: 4rem 2rem; border-top: 1px solid var(--border-color); text-align: center; color: var(--text-color-secondary); font-size: 14px; }
        .footer .nav-links { justify-content: center; margin-bottom: 1rem; }

        /* --- Cart & Modal Styles --- */
        .cart-icon { position: relative; cursor: pointer; }
        .cart-badge { position: absolute; top: -5px; right: -12px; background-color: var(--primary-color); color: #000; width: 18px; height: 18px; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-size: 11px; font-weight: bold; transform: scale(0); transition: transform 0.2s ease; }
        .cart-badge.active { transform: scale(1); }
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); backdrop-filter: blur(10px); z-index: 2000; opacity: 0; visibility: hidden; transition: opacity 0.4s ease; }
        .modal-overlay.active { opacity: 1; visibility: visible; }
        .cart-modal { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0.95); width: 90%; max-width: 600px; background: var(--surface-color); border-radius: 20px; box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5); z-index: 2001; opacity: 0; visibility: hidden; transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); display: flex; flex-direction: column; }
        .modal-overlay.active .cart-modal { transform: translate(-50%, -50%) scale(1); opacity: 1; visibility: visible; }
        .modal-header { padding: 1.5rem; border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center; }
        .modal-header h2 { font-size: 1.5rem; }
        .modal-close-btn { background:none; border:none; color:var(--text-color); font-size: 2rem; cursor:pointer; line-height: 1; }
        .modal-body { padding: 2rem; overflow-y: auto; max-height: 60vh; }
        .modal-footer { padding: 1.5rem; border-top: 1px solid var(--border-color); display: flex; justify-content: space-between; background-color: rgba(0,0,0,0.2); border-bottom-left-radius: 20px; border-bottom-right-radius: 20px;}
        .modal-view { display: none; }
        .modal-view.active { display: block; animation: fadeIn 0.5s ease; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* --- Cart & Checkout Form Styles --- */
        .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
        .form-group { margin-bottom: 1rem; }
        .form-group.full-width { grid-column: 1 / -1; }
        .form-group label { display: block; margin-bottom: 0.5rem; color: var(--text-color-secondary); font-size: 0.9rem;}
        .form-group input { width: 100%; padding: 14px; background: #2c2c2e; border: 1px solid var(--border-color); border-radius: 8px; color: var(--text-color); font-size: 1rem; transition: border-color 0.3s ease, box-shadow 0.3s ease; }
        .form-group input:focus { outline: none; border-color: var(--primary-color); box-shadow: 0 0 0 3px rgba(0, 209, 193, 0.2); }
        .payment-options { display: flex; flex-direction: column; gap: 1rem; }
        .payment-option { padding: 1rem; border: 1px solid var(--border-color); border-radius: 8px; cursor: pointer; display: flex; align-items: center; gap: 1rem; transition: all 0.2s ease; }
        .payment-option.selected { border-color: var(--primary-color); box-shadow: 0 0 0 2px rgba(0, 209, 193, 0.2); }
        #creditCardForm { display: none; margin-top: 1.5rem; }
        .cart-item { display:flex; align-items:center; gap:1.5rem; margin-bottom:1.5rem; }
        .cart-item-img { width:60px; height:60px; border-radius:8px; object-fit:cover; background:#333; }
        .cart-item-details { flex-grow:1; }
        .cart-item-details h4 { margin:0; font-size: 1rem; }
        .cart-item-details p { color:var(--text-color-secondary); margin:0.25rem 0 0; }
        .cart-item-quantity { display:flex; align-items:center; gap:0.75rem; }
        .quantity-btn { background:#444; border:none; color:#fff; width:28px; height:28px; border-radius:50%; cursor:pointer; font-size: 1rem; }
        .cart-total { text-align:right; font-size:1.2rem; margin-top:2rem; border-top:1px solid var(--border-color); padding-top:1rem; }
        #order-summary p { margin-bottom: 0.75rem; line-height: 1.6; }
        #order-summary strong { color: var(--text-color-secondary); }

        /* Mobile Responsiveness */
        @media (max-width: 768px) {
            .nav-links { gap: 1rem; }
            .nav-link:not(.logo):not(.btn) { display: none; }
            .cart-icon { display: block; }
            .story-text h1 { font-size: 2.5rem; }
            .story-text h2 { font-size: 1.5rem; }
            .section-title { font-size: 2.5rem; }
            .section-subtitle { font-size: 1.2rem; }
            .features-grid, .reviews-grid, .gallery-grid { grid-template-columns: 1fr; }
            .ui-demo-outer-container { padding: 1rem; }
            .form-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    
    <div class="canvas-container">
        <canvas id="main-3d-canvas"></canvas>
        <canvas id="mask-3d-canvas"></canvas>
    </div>

    <header class="header">
        <nav class="nav container">
            <a href="#" class="nav-link logo">ClearToast Pro</a>
            <ul class="nav-links">
                <li><a href="#features" class="nav-link">Features</a></li>
                <li><a href="#gallery" class="nav-link">Galerie</a></li>
                <li><a href="#reviews" class="nav-link">Bewertungen</a></li>
                <li><a href="#buy" class="nav-link btn">Kaufen</a></li>
                <li>
                    <div class="cart-icon" id="cartIcon">
                        <i class="fas fa-shopping-bag"></i>
                        <span class="cart-badge" id="cartBadge">0</span>
                    </div>
                </li>
            </ul>
        </nav>
    </header>
    
    <div class="scroll-section-container">
        <div id="story-1" class="story-content">
            <div class="story-text"><h1>Das ist ClearToast.</h1><h2>Toast, neu gedacht.</h2></div>
        </div>
        <div id="story-2" class="story-content">
             <div class="story-text"><h1>Vollkommene Transparenz.</h1><h2>Jedes Detail, perfektioniert.</h2></div>
        </div>
        <div id="story-3" class="story-content">
             <div class="story-text"><h1>Intelligenz, die man schmeckt.</h1><h2>Für Ihren perfekten Morgen.</h2></div>
        </div>
    </div>

    <div class="content-area">
        <section id="features" class="section container">
            <h2 class="section-title">Technologie für den perfekten Biss.</h2>
            <p class="section-subtitle">Wir haben jede Komponente neu durchdacht, damit Sie nicht mehr über Ihren Toast nachdenken müssen.</p>
            <div class="features-grid">
                <div class="feature-item">
                    <i class="fas fa-microchip"></i><h3>toAIst Chip</h3>
                    <p class="feature-short-desc">Unsere KI sorgt für das perfekte Ergebnis.</p>
                    <div class="feature-details"><p>Analysiert Brotsorte und Feuchtigkeit für einen Bräunungsgrad, der exakt Ihren Wünschen entspricht.</p></div>
                </div>
                <div class="feature-item">
                     <i class="fas fa-eye"></i><h3>doubleView</h3>
                     <p class="feature-short-desc">Behalten Sie alles im Blick.</p>
                     <div class="feature-details"><p>Die Doppelglas-Konstruktion ermöglicht volle Kontrolle und schützt zugleich vor Verbrennungen.</p></div>
                </div>
                <div class="feature-item">
                    <i class="fas fa-shield-alt"></i><h3>thermoGlass</h3>
                    <p class="feature-short-desc">Maximale Sicherheit und Langlebigkeit.</p>
                    <div class="feature-details"><p>Doppelwandiges Borosilikatglas bietet höchste Hitzebeständigkeit und eine faszinierende Sicht.</p></div>
                </div>
                <div class="feature-item">
                    <i class="fas fa-mobile-alt"></i><h3>smartControl</h3>
                    <p class="feature-short-desc">Bequeme Steuerung per App.</p>
                    <div class="feature-details"><p>Starten und steuern Sie Ihren Toaster von überall mit unserer intuitiven App für iOS und Android.</p></div>
                </div>
                 <div class="feature-item">
                    <i class="fas fa-bolt"></i><h3>safety+</h3>
                     <p class="feature-short-desc">Intelligenter Schutzmechanismus.</p>
                     <div class="feature-details"><p>Ein patentierter Überhitzungsschutz mit automatischer Abschaltung sorgt für maximale Sicherheit.</p></div>
                 </div>
                 <div class="feature-item">
                    <i class="fas fa-gem"></i><h3>modern+</h3>
                     <p class="feature-short-desc">Ein Design-Highlight für Ihre Küche.</p>
                     <div class="feature-details"><p>Edles Glas, klare Linien und ein großes Touch-Display machen den Toaster zum Blickfang.</p></div>
                 </div>
            </div>
        </section>

        <div class="modern-image-wrapper">
            <img src="/assets/renderingproductbild2.jpg" class="rounded-shadow-image" alt="Aufwärmen">
        </div>

        <section id="ui-demo" class="section container">
            <h2 class="section-title">Einfachheit auf Knopfdruck.</h2>
            <div class="ui-demo-outer-container">
                <div class="toaster-app" id="toasterApp">
                    <div class="selection-view">
                        <div class="slider-container">
                            <div class="slider" id="demoSlider">
                                <div class="slide"><img src="/assets/heat.png" class="toast-img" alt="Aufwärmen"><h3 class="slide-title"></h3></div>
                                <div class="slide"><img src="/assets/lightesttoast.png" class="toast-img" alt="Sehr Leicht"><h3 class="slide-title"></h3></div>
                                <div class="slide"><img src="/assets/lighttoast.png" class="toast-img" alt="Leicht"><h3 class="slide-title"></h3></div>
                                <div class="slide"><img src="/assets/toastmedium.webp" class="toast-img" alt="Mittel"><h3 class="slide-title"></h3></div>
                                <div class="slide"><img src="/assets/strongtoast.png" class="toast-img" alt="Stark"><h3 class="slide-title"></h3></div>
                            </div>
                        </div>
                        <button class="nav-btn prev-btn" id="demoPrevBtn"><div class="arrow"></div></button>
                        <button class="nav-btn next-btn" id="demoNextBtn"><div class="arrow"></div></button>
                        <div class="browning-indicator" id="demoIndicator"></div>
                        <button class="start-btn" id="demoStartBtn"><i class="fas fa-play"></i></button>
                    </div>
                    <div class="timer-view">
                        <div class="progress-bar-container">
                            <div id="progressBarFill" class="progress-bar-fill"></div>
                        </div>
                        <div class="timer-display" id="timerDisplay">0:30</div>
                        <button class="cancel-btn" id="cancelBtn">Abbrechen</button>
                    </div>
                </div>
            </div>
        </section>

        <section id="gallery" class="section container">
             <h2 class="section-title">Passt in jede Küche.</h2>
             <p class="section-subtitle">Klares Design, das sich nahtlos in moderne und klassische Umgebungen einfügt.</p>
             <div class="gallery-grid">
                 <div class="gallery-item"><img src="/assets/renderingproductbild2.jpg" alt="Toaster in einer modernen Küche"></div>
                 <div class="gallery-item"><img src="/assets/rengferingdesign2.png" alt="Nahaufnahme des Toasters"></div>
                 <div class="gallery-item"><img src="/assets/renderingproductbild3.png" alt="Toaster auf einer Küchentheke mit Frühstück"></div>
                 <div class="gallery-item"><img src="/assets/renderingproductbild4.png" alt="Toaster von der Seite"></div>
                 <div class="gallery-item"><img src="/assets/renderingproductbild5.png" alt="Detailaufnahme 1"></div>
                 <div class="gallery-item"><img src="/assets/renderingproductbild6.png" alt="Detailaufnahme 2"></div>
             </div>
        </section>

        <section id="reviews" class="section container">
            <h2 class="section-title">Was unsere Kunden sagen.</h2>
            <div class="reviews-grid">
                <div class="review-card">
                    <div class="review-stars">
                        <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                    </div>
                    <p class="review-text">"Endlich kein verbrannter Toast mehr! Sieht super edel aus und funktioniert tadellos. Jeden Cent wert."</p>
                    <p class="review-author">Julia K.<span>Verifizierter Kauf</span></p>
                </div>
                <div class="review-card">
                    <div class="review-stars">
                        <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                    </div>
                    <p class="review-text">"Das Design ist einfach der Wahnsinn. Alle unsere Gäste fragen, woher wir diesen Toaster haben. Die App-Steuerung ist ein nettes Extra. Sehr empfehlenswert für alle, die Wert auf Ästhetik und Funktion legen."</p>
                    <p class="review-author">Markus B.<span>Verifizierter Kauf</span></p>
                </div>
                <div class="review-card">
                    <div class="review-stars">
                        <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="far fa-star"></i>
                    </div>
                    <p class="review-text">"Sehr guter Toaster. Das Glas wird außen nicht heiß, was super ist mit Kindern. Ein bisschen teuer, aber die Qualität stimmt."</p>
                    <p class="review-author">Sandra L.<span>Verifizierter Kauf</span></p>
                </div>
            </div>
        </section>

        <section id="buy" class="section container">
            <div class="final-cta">
                <h2 class="section-title">ClearToast Pro</h2>
                <p class="section-subtitle" style="font-size: 2rem; color: var(--text-color); margin-top: -3rem;">€100,00</p>
                <p class="section-subtitle">Inkl. MwSt., zzgl. Versand. Sofort lieferbar.</p>
                <button class="btn add-to-cart-btn" style="font-size: 1.2rem; padding: 18px 36px;">In den Warenkorb</button>
            </div>
        </section>
        
        <footer class="footer">
            <div class="container">
                <ul class="nav-links">
                    <li><a href="#" class="nav-link">Datenschutz</a></li>
                    <li><a href="#" class="nav-link">Impressum</a></li>
                    <li><a href="#" class="nav-link">Kontakt</a></li>
                </ul>
                <p>&copy; 2025 ClearToast Inc. Alle Rechte vorbehalten.</p>
            </div>
        </footer>
    </div>
    
    <div class="modal-overlay" id="modalOverlay">
        <div class="cart-modal" id="cartModal">
            <div class="modal-header">
                <h2 id="modalTitle">Warenkorb</h2>
                <button id="modalCloseBtn" class="modal-close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div id="view-cart" class="modal-view active">
                    <div id="cart-items-container">
                        <p style="text-align:center; color: var(--text-color-secondary);">Ihr Warenkorb ist leer.</p>
                    </div>
                    <div id="cart-total-container"></div>
                </div>

                <form id="shipping-form">
                    <div id="view-shipping" class="modal-view">
                        <div class="form-grid">
                            <div class="form-group"><label for="firstname">Vorname</label><input type="text" id="firstname" name="firstname" required></div>
                            <div class="form-group"><label for="lastname">Nachname</label><input type="text" id="lastname" name="lastname" required></div>
                            <div class="form-group full-width"><label for="address">Straße & Hausnummer</label><input type="text" id="address" name="address" required></div>
                            <div class="form-group"><label for="zip">PLZ</label><input type="text" id="zip" name="zip" required></div>
                            <div class="form-group"><label for="city">Stadt</label><input type="text" id="city" name="city" required></div>
                        </div>
                    </div>
                </form>

                <div id="view-payment" class="modal-view">
                    <div class="payment-options">
                        <div class="payment-option" data-value="credit-card">
                            <i class="far fa-credit-card"></i> Kreditkarte
                        </div>
                        <div class="payment-option" data-value="paypal">
                            <i class="fab fa-paypal"></i> PayPal
                        </div>
                    </div>
                    <form id="creditCardForm">
                        <div class="form-grid">
                            <div class="form-group full-width"><label for="card-name">Name auf der Karte</label><input type="text" id="card-name" required></div>
                            <div class="form-group full-width"><label for="card-number">Kartennummer</label><input type="text" id="card-number" placeholder="•••• •••• •••• ••••" required></div>
                            <div class="form-group"><label for="card-expiry">Gültig bis</label><input type="text" id="card-expiry" placeholder="MM/YY" required></div>
                            <div class="form-group"><label for="card-cvc">CVC</label><input type="text" id="card-cvc" placeholder="123" required></div>
                        </div>
                    </form>
                </div>
                
                <div id="view-confirm" class="modal-view">
                    <div id="order-summary">
                        <h4>Ihre Bestellung</h4>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="modalBackBtn" class="btn secondary" style="display: none;">Zurück</button>
                <button id="modalNextBtn" class="btn">Zur Kasse</button>
            </div>
        </div>
    </div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    
    // --- 3D SCROLL ANIMATION ---
    const visualCanvas = document.getElementById('main-3d-canvas');

    if (visualCanvas) {
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.set(0, 0, 5);

        let visualModel;

        const visualScene = new THREE.Scene();
        const visualRenderer = new THREE.WebGLRenderer({ 
            canvas: visualCanvas, 
            antialias: true, 
            alpha: true 
        });
        
        visualRenderer.setSize(window.innerWidth, window.innerHeight);
        visualRenderer.setPixelRatio(window.devicePixelRatio);
        visualRenderer.toneMapping = THREE.ACESFilmicToneMapping;
        visualRenderer.outputEncoding = THREE.sRGBEncoding;

        // Beleuchtung
        const ambientLight = new THREE.AmbientLight(0xffffff, 1.5);
        visualScene.add(ambientLight);
        const directionalLight = new THREE.DirectionalLight(0xffffff, 2.0);
        directionalLight.position.set(5, 10, 7.5);
        visualScene.add(directionalLight);
        const pointLight = new THREE.PointLight(0xffffff, 1.5);
        pointLight.position.set(-5, 3, 5);
        visualScene.add(pointLight);
        
        const storySections = document.querySelectorAll('.story-content');
        
        // Modell-Loader
        const loader = new THREE.GLTFLoader();
        loader.load(
            '/models/toaster.glb',
            function (gltf) {
                visualModel = gltf.scene;
                visualModel.scale.set(6, 6, 6);
                visualModel.position.y = -1;
                visualScene.add(visualModel);
                animate();
            },
            undefined,
            function (error) {
                console.error('Fehler beim Laden des 3D-Modells:', error);
                const fallbackGeo = new THREE.BoxGeometry(2, 1.5, 1);
                const fallbackMat = new THREE.MeshStandardMaterial({ color: 0xcccccc });
                visualModel = new THREE.Mesh(fallbackGeo, fallbackMat);
                visualScene.add(visualModel);
                animate();
            }
        );
        
        function updateAnimation() {
            const scrollY = window.scrollY;
            const h = window.innerHeight;
            if (!visualModel) return;

            // Scroll-basierte Animation
            if (scrollY < h) {
                const p = scrollY / h;
                visualModel.rotation.y = p * Math.PI * 0.25;
                camera.position.z = 5 - p * 2;
                camera.position.x = 0;
                camera.rotation.y = 0;
            } else if (scrollY < h * 2) {
                const p = (scrollY - h) / h;
                visualModel.rotation.y = Math.PI * 0.25 + p * Math.PI * 0.5;
                camera.position.z = 3 - p * 1.5;
                camera.position.x = p * 1.5;
                camera.rotation.y = p * 0.2;
            } else if (scrollY < h * 3) {
                const p = (scrollY - h*2) / h;
                camera.position.z = 1.5 + p * 3.5;
                camera.position.x = 1.5 - p * 1.5;
                camera.rotation.y = 0.2 - p * 0.2;
            }

            // Sichtbarkeit der Story-Sektionen
            storySections.forEach((section, index) => {
                const sectionTop = index * h;
                if (scrollY > sectionTop - h * 0.7 && scrollY < sectionTop + h * 0.3) {
                    section.classList.add('visible');
                } else {
                    section.classList.remove('visible');
                }
            });
        }
        
        function animate() {
            requestAnimationFrame(animate);
            updateAnimation();
            visualRenderer.render(visualScene, camera);
        }
        
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            visualRenderer.setSize(window.innerWidth, window.innerHeight);
        });
    }

    // --- TOASTER UI DEMO ---
    const toasterApp = document.getElementById('toasterApp');
    if (toasterApp) {
        const demoSlider = document.getElementById('demoSlider');
        const demoSlides = demoSlider.querySelectorAll('.slide');
        const indicatorContainer = document.getElementById('demoIndicator');
        let demoCurrentIndex = 0;
        const browningTimes = [15, 25, 35, 45, 60];
        let timerInterval;

        demoSlides.forEach((_, i) => {
            const dot = document.createElement('div');
            dot.classList.add('dot');
            if (i === 0) dot.classList.add('active');
            indicatorContainer.appendChild(dot);
        });
        const demoDots = indicatorContainer.querySelectorAll('.dot');
        
        function updateDemoSlider() {
            if(!demoSlider) return;
            demoSlider.style.transform = `translateX(-${demoCurrentIndex * 100}%)`;
            demoDots.forEach((dot, i) => dot.classList.toggle('active', i === demoCurrentIndex));
        }
        
        document.getElementById('demoNextBtn').addEventListener('click', () => {
            demoCurrentIndex = (demoCurrentIndex + 1) % demoSlides.length;
            updateDemoSlider();
        });
        
        document.getElementById('demoPrevBtn').addEventListener('click', () => {
            demoCurrentIndex = (demoCurrentIndex - 1 + demoSlides.length) % demoSlides.length;
            updateDemoSlider();
        });

        // --- GEÄNDERT: Logik für Progress Bar ---
        const progressBarFill = document.getElementById('progressBarFill');
        const timerDisplay = document.getElementById('timerDisplay');

        document.getElementById('demoStartBtn').addEventListener('click', () => {
            toasterApp.classList.add('timer-active');
            let remainingTime = browningTimes[demoCurrentIndex];
            const totalTime = remainingTime;
            
            clearInterval(timerInterval);

            // Setze Balken sofort auf 0% zurück, bevor die Animation beginnt
            progressBarFill.style.transition = 'none';
            progressBarFill.style.width = '0%';
            // "Reflow" erzwingen, damit der Reset gerendert wird
            progressBarFill.offsetHeight; 
            // Transition für die Animation wieder aktivieren
            progressBarFill.style.transition = `width ${totalTime}s linear`;
            // Animation starten
            progressBarFill.style.width = '100%';

            // Timer-Anzeige aktualisieren
            timerDisplay.textContent = `0:${remainingTime.toString().padStart(2, '0')}`;
            timerInterval = setInterval(() => {
                remainingTime--;
                timerDisplay.textContent = `0:${remainingTime.toString().padStart(2, '0')}`;
                
                if (remainingTime < 0) {
                    clearInterval(timerInterval);
                    setTimeout(() => {
                        toasterApp.classList.remove('timer-active');
                        // Setze Balken für den nächsten Durchlauf zurück
                        progressBarFill.style.transition = 'none';
                        progressBarFill.style.width = '0%';
                    }, 500);
                }
            }, 1000);
        });

        document.getElementById('cancelBtn').addEventListener('click', () => {
            clearInterval(timerInterval);
            toasterApp.classList.remove('timer-active');
            // Setze Balken beim Abbrechen zurück
            progressBarFill.style.transition = 'none';
            progressBarFill.style.width = '0%';
        });

        updateDemoSlider();
    }

    // --- CHECKOUT LOGIK (unverändert) ---
    const cart = {
        items: [],
        product: { id: 1, name: 'ClearToast Pro', price: 100.00, image: '/assets/renderingproductbild2.jpg' }
    };
    const modalOverlay = document.getElementById('modalOverlay');
    const modalTitle = document.getElementById('modalTitle');
    const modalBackBtn = document.getElementById('modalBackBtn');
    const modalNextBtn = document.getElementById('modalNextBtn');
    let currentViewIndex = 0;
    const viewOrder = ['view-cart', 'view-shipping', 'view-payment', 'view-confirm'];
    
    function openModal() {
        currentViewIndex = 0;
        updateCartUI();
        updateModalState();
        modalOverlay.classList.add('active');
    }

    function closeModal() {
        modalOverlay.classList.remove('active');
    }
    
    function updateModalState() {
        document.querySelectorAll('.modal-view').forEach(v => v.classList.remove('active'));
        document.getElementById(viewOrder[currentViewIndex]).classList.add('active');
        modalBackBtn.style.display = currentViewIndex > 0 ? 'inline-block' : 'none';
        const titles = ['Warenkorb', 'Lieferadresse', 'Zahlungsmethode', 'Bestellung prüfen'];
        modalTitle.textContent = titles[currentViewIndex];
        const nextLabels = ['Zur Kasse', 'Weiter zur Zahlung', 'Weiter zur Prüfung', 'Jetzt Kaufen'];
        modalNextBtn.textContent = nextLabels[currentViewIndex];
        modalNextBtn.disabled = (currentViewIndex === 0 && cart.items.length === 0);
        if(currentViewIndex === 3) {
            populateOrderSummary();
        }
    }

    function handleNext() {
        if (!validateCurrentStep()) return;
        if (currentViewIndex < viewOrder.length - 1) {
            currentViewIndex++;
            updateModalState();
        } else {
            alert('Vielen Dank für Ihren Einkauf!');
            cart.items = [];
            closeModal();
            updateCartUI();
        }
    }

    function handleBack() {
        if (currentViewIndex > 0) {
            currentViewIndex--;
            updateModalState();
        }
    }

    function validateCurrentStep() {
        if (currentViewIndex === 1) {
            const form = document.getElementById('shipping-form');
            if (!form.checkValidity()) {
                form.reportValidity();
                return false;
            }
        }
        if (currentViewIndex === 2) {
             const selectedOption = document.querySelector('.payment-option.selected');
             if (!selectedOption) {
                 alert('Bitte wählen Sie eine Zahlungsmethode.');
                 return false;
             }
             if (selectedOption.dataset.value === 'credit-card') {
                 const form = document.getElementById('creditCardForm');
                 if (!form.checkValidity()) {
                     form.reportValidity();
                     return false;
                 }
             }
        }
        return true;
    }

    function populateOrderSummary() {
        const summaryContainer = document.getElementById('order-summary');
        const shippingForm = new FormData(document.getElementById('shipping-form'));
        const paymentMethod = document.querySelector('.payment-option.selected')?.dataset.value;
        const totalCost = cart.items.reduce((sum, item) => sum + (item.price * item.quantity), 0);
        let paymentText = 'Nicht angegeben';
        if (paymentMethod === 'credit-card') paymentText = 'Kreditkarte';
        if (paymentMethod === 'paypal') paymentText = 'PayPal';

        summaryContainer.innerHTML = `
            <p><strong>Lieferung an:</strong><br>${shippingForm.get('firstname')} ${shippingForm.get('lastname')}<br>${shippingForm.get('address')}<br>${shippingForm.get('zip')} ${shippingForm.get('city')}</p>
            <p><strong>Zahlungsmethode:</strong><br>${paymentText}</p>
            <p><strong>Gesamtsumme:</strong><br><strong>€${totalCost.toFixed(2)}</strong></p>
            <hr style="border-color: var(--border-color); margin: 1rem 0;">
            <p style="font-size:0.8rem; color:var(--text-color-secondary);">Mit Klick auf "Jetzt kaufen" schließen Sie die Bestellung ab.</p>
        `;
    }

    function updateCartUI() {
        const totalItems = cart.items.reduce((sum, item) => sum + item.quantity, 0);
        const cartBadge = document.getElementById('cartBadge');
        cartBadge.classList.toggle('active', totalItems > 0);
        cartBadge.textContent = totalItems;
        
        const cartItemsContainer = document.getElementById('cart-items-container');
        const cartTotalContainer = document.getElementById('cart-total-container');
        if (!cartItemsContainer) return;
        
        cartItemsContainer.innerHTML = '';
        cartTotalContainer.innerHTML = '';
        
        if (cart.items.length === 0) {
            cartItemsContainer.innerHTML = '<p style="text-align:center; color: var(--text-color-secondary);">Ihr Warenkorb ist leer.</p>';
        } else {
            let totalCost = 0;
            cart.items.forEach(item => {
                totalCost += item.price * item.quantity;
                const itemEl = document.createElement('div');
                itemEl.className = 'cart-item';
                itemEl.innerHTML = `
                    <img src="${item.image}" alt="${item.name}" class="cart-item-img">
                    <div class="cart-item-details">
                        <h4>${item.name}</h4>
                        <p>€${item.price.toFixed(2)}</p>
                    </div>
                    <div class="cart-item-quantity">
                        <button class="quantity-btn" data-id="${item.id}" data-change="-1">-</button>
                        <span>${item.quantity}</span>
                        <button class="quantity-btn" data-id="${item.id}" data-change="1">+</button>
                    </div>`;
                cartItemsContainer.appendChild(itemEl);
            });
            cartTotalContainer.innerHTML = `<div class="cart-total"><strong>Gesamt:</strong> <span>€${totalCost.toFixed(2)}</span></div>`;
            cartItemsContainer.querySelectorAll('.quantity-btn').forEach(btn => btn.addEventListener('click', changeQuantity));
        }
        if(modalOverlay.classList.contains('active')) updateModalState();
    }
    
    function changeQuantity(e) {
        const id = parseInt(e.target.dataset.id);
        const change = parseInt(e.target.dataset.change);
        const item = cart.items.find(i => i.id === id);
        if (item) {
            item.quantity += change;
            if (item.quantity <= 0) {
                cart.items = cart.items.filter(i => i.id !== id);
            }
            updateCartUI();
        }
    }

    document.querySelectorAll('.add-to-cart-btn').forEach(btn => btn.addEventListener('click', () => {
        const existingItem = cart.items.find(item => item.id === cart.product.id);
        if (existingItem) { 
            existingItem.quantity++; 
        } else { 
            cart.items.push({ ...cart.product, quantity: 1 }); 
        }
        openModal();
    }));
    
    document.querySelectorAll('.payment-option').forEach(option => {
        option.addEventListener('click', (e) => {
            document.querySelectorAll('.payment-option').forEach(o => o.classList.remove('selected'));
            const selectedOption = e.currentTarget;
            selectedOption.classList.add('selected');
            document.getElementById('creditCardForm').style.display = selectedOption.dataset.value === 'credit-card' ? 'block' : 'none';
        });
    });

    document.getElementById('cartIcon').addEventListener('click', openModal);
    document.getElementById('modalCloseBtn').addEventListener('click', closeModal);
    modalOverlay.addEventListener('click', (e) => { if(e.target === modalOverlay) closeModal(); });
    modalNextBtn.addEventListener('click', handleNext);
    modalBackBtn.addEventListener('click', handleBack);
});
</script>

</body>
</html>